# 🚀 微信小程序快速启动指南

## ⚡ 5分钟快速开始

### 第1步：用微信开发者工具打开项目 (2分钟)

```
1. 下载微信开发者工具
   https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

2. 打开工具 > 文件 > 打开项目

3. 选择项目目录：d:\Web\congwujiuzhu

4. 输入你的小程序 AppID（如果没有先申请一个）

5. 点击"打开"
```

### 第2步：配置腾讯地图 Key (1分钟)

```
1. 访问 https://lbs.qq.com

2. 注册并登录开发者账户

3. 创建新应用，获取 Web/小程序 Key

4. 编辑文件 services/tencentMapService.ts

5. 找到这一行：
   apiKey: 'YOUR_TENCENT_MAP_API_KEY_HERE'
   
6. 替换为你的 Key：
   apiKey: 'wx1234567890abcdef'
```

### 第3步：配置合法域名 (1分钟)

```
1. 打开微信小程序后台
   https://mp.weixin.qq.com

2. 点击左侧"开发 > 开发设置"

3. 在"服务器域名"中添加：
   https://apis.map.qq.com

4. 保存
```

### 第4步：预览 (1分钟)

```
在微信开发者工具中：

1. 点击顶部工具栏的 "预览" 按钮

2. 用微信扫描显示的二维码

3. 在微信中查看小程序效果！
```

---

## 📁 项目文件速查表

### 🎯 核心文件

| 文件 | 说明 | 修改频率 |
|------|------|--------|
| `app.json` | 小程序配置（页面、权限、tabBar） | 低 |
| `app.ts` | 全局逻辑（初始化、定位） | 低 |
| `app.wxss` | 全局样式 | 中 |
| `types.ts` | TypeScript 类型定义 | 低 |

### 📱 页面文件

#### 地图页面 (`pages/index/`)
```
index.ts      <- 页面逻辑（地图初始化、标记、事件）
index.wxml    <- 页面结构（HTML）
index.wxss    <- 页面样式（CSS）
index.json    <- 页面配置（导航栏等）
```

#### 列表页面 (`pages/list/`)
#### 详情页面 (`pages/detail/`)
#### 发布页面 (`pages/report/`)

### 🔧 服务文件

| 文件 | 功能 |
|------|------|
| `services/storageService.ts` | 本地数据存储和处理 |
| `services/tencentMapService.ts` | 腾讯地图 API 集成 |
| `services/geminiService.ts` | Google Gemini AI 分析 |

---

## 🗺️ 页面导航

```
启动应用
    ↓
首页 (pages/index/) - 地图视图
    ├─→ 点击标记 → 详情页 (pages/detail/)
    │           └─→ 更新状态/审核
    │
    ├─→ 切换视图 → 列表页 (pages/list/)
    │
    └─→ 点击"➕" → 发布页 (pages/report/)
                └─→ 上传图片/视频 → 发布
```

---

## 🐛 调试技巧

### 1. 查看日志
```
微信开发者工具 > 调试 > 控制台
console.log() 的输出会显示在这里
```

### 2. 查看网络请求
```
微信开发者工具 > 调试 > Network
可以看到所有 API 请求和响应
```

### 3. 查看本地存储
```
微信开发者工具 > 调试 > Storage
可以看到 wx.setStorageSync() 保存的数据
```

### 4. 使用真机调试
```
微信开发者工具 > 工具栏 > 真机调试
在真实手机上运行和调试
```

---

## ✅ 检查清单

在部署之前，确保：

- [ ] 腾讯地图 Key 已配置
- [ ] 服务器域名已添加
- [ ] 在真机上测试过定位功能
- [ ] 所有页面都能正常访问
- [ ] 图片上传功能正常
- [ ] 页面样式在不同分辨率下正常显示

---

## 📱 实机测试设备要求

- **系统**：iOS 12.4+ 或 Android 5+
- **微信版本**：7.0+
- **位置权限**：已启用 GPS

---

## 🆘 快速问题排查

### ❌ 地图显示为灰色

**原因**：腾讯地图 API Key 错误或未配置

**解决**：
1. 检查 `services/tencentMapService.ts` 中的 Key
2. 确保服务器域名已添加
3. 检查浏览器控制台是否有错误信息

### ❌ 定位一直失败

**原因**：
- 未授予位置权限
- 网络不稳定
- 使用模拟器（某些功能不支持）

**解决**：
1. 在真机上测试
2. 检查微信权限设置
3. 确保网络连接正常

### ❌ 上传图片失败

**原因**：
- 图片过大（>10MB）
- 设备存储空间不足
- 网络中断

**解决**：
1. 压缩图片大小
2. 清理设备存储
3. 检查网络连接

---

## 📚 更详细的指南

查看以下文件获取更多信息：

- **完整开发指南** → 查看 `MINIPROGRAM_GUIDE.md`
- **完整项目说明** → 查看 `README_MINIPROGRAM.md`

---

## 🎉 下一步

✅ 成功启动后，你可以：

1. **自定义样式**
   - 编辑 `app.wxss` 修改全局样式
   - 编辑各页面的 `.wxss` 文件修改页面样式

2. **添加新功能**
   - 在相应的 `.ts` 文件中添加方法
   - 在 `.wxml` 中添加对应的事件绑定

3. **集成后端 API**
   - 将 `storageService.ts` 中的本地存储改为 API 调用
   - 使用 `wx.request()` 进行网络请求

4. **发布上线**
   - 微信开发者工具 > 上传
   - 在微信后台提交审核
   - 审核通过后发布上线

---

**祝你开发愉快！有问题随时查阅文档或提交 Issue。** 🚀
