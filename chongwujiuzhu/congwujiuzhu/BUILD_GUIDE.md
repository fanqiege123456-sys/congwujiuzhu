# å°ç¨‹åºç¼–è¯‘æŒ‡å—

## é—®é¢˜è¯´æ˜
çœŸæœºè°ƒè¯•æ—¶å‡ºç°é”™è¯¯ï¼š`entry file app.js not found [error code 800059]`

**åŸå› ï¼š** WeChat å°ç¨‹åºéœ€è¦ JavaScript æ–‡ä»¶ï¼ˆ`.js`ï¼‰ï¼Œä½†é¡¹ç›®æ–‡ä»¶éƒ½æ˜¯ TypeScript æ ¼å¼ï¼ˆ`.ts`ï¼‰ã€‚éœ€è¦å…ˆç¼–è¯‘æˆ JavaScriptã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. ç¼–è¯‘ TypeScript ä¸º JavaScript
åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
npm run build
```

æˆ–ç›´æ¥ä½¿ç”¨ TypeScript ç¼–è¯‘å™¨ï¼š

```bash
npx tsc
```

### 2. ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨ç¼–è¯‘ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
```bash
npm run dev
```

è¿™æ ·åœ¨ä¿®æ”¹ `.ts` æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨ç¼–è¯‘ã€‚

## ç¼–è¯‘ç»“æœ

ç¼–è¯‘æˆåŠŸåä¼šç”Ÿæˆï¼š

```
app.js              â† app.ts ç¼–è¯‘ç»“æœ
global.d.ts         â† ç±»å‹å®šä¹‰
pages/
  index/
    index.js        â† pages/index/index.ts ç¼–è¯‘ç»“æœ
    index.d.ts
  list/
    list.js
    list.d.ts
  detail/
    detail.js
    detail.d.ts
  report/
    report.js
    report.d.ts
services/
  nativeMapService.js
  nativeMapService.d.ts
  storageService.js
  storageService.d.ts
  ...
```

## åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ä½¿ç”¨

### ç¬¬ä¸€æ¬¡ä½¿ç”¨
1. åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š`npm run build`
2. ç­‰å¾…ç¼–è¯‘å®Œæˆ
3. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
4. çœŸæœºè°ƒè¯•æˆ–ç‚¹å‡»ã€Œé¢„è§ˆã€

### å¼€å‘ä¸­
1. åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š`npm run dev` å¯åŠ¨ç›‘å¬
2. æ¯æ¬¡ä¿®æ”¹ TypeScript æ–‡ä»¶éƒ½ä¼šè‡ªåŠ¨ç¼–è¯‘
3. å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½ç¼–è¯‘åçš„ JavaScript

### æäº¤ä»£ç æ—¶
- âœ… æäº¤æºä»£ç ï¼ˆ`.ts` æ–‡ä»¶ï¼‰
- âœ… æäº¤ç¼–è¯‘é…ç½®ï¼ˆ`tsconfig.json`ã€`global.d.ts`ï¼‰
- âœ… æäº¤ç”Ÿæˆçš„ `.js` æ–‡ä»¶ï¼ˆä»¥ä¾¿æ²¡æœ‰ Node.js ç¯å¢ƒçš„äººä¹Ÿèƒ½è¿è¡Œï¼‰

## æ„å»ºé…ç½®è¯´æ˜

### tsconfig.json
- **target: ES2020** - ç¼–è¯‘ä¸º ES2020 æ ‡å‡† JavaScript
- **module: CommonJS** - ä½¿ç”¨ CommonJS æ¨¡å—ç³»ç»Ÿï¼ˆWeChat å°ç¨‹åºæ ‡å‡†ï¼‰
- **outDir: ./** - ç”Ÿæˆçš„ JS æ–‡ä»¶åœ¨åŒç›®å½•
- **strict: false** - å…³é—­ä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼ˆå› ä¸º WeChat API æ˜¯ä»»æ„ç±»å‹ï¼‰

### global.d.ts
å®šä¹‰ WeChat å°ç¨‹åºçš„å…¨å±€å¯¹è±¡å’Œå‡½æ•°ï¼Œä½¿ TypeScript èƒ½è¯†åˆ«ï¼š
- `wx` - WeChat API å¯¹è±¡
- `Page()` - é¡µé¢æ³¨å†Œå‡½æ•°
- `App()` - åº”ç”¨æ³¨å†Œå‡½æ•°
- `getApp()` - è·å–åº”ç”¨å®ä¾‹
- `getCurrentPages()` - è·å–é¡µé¢æ ˆ

## å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘å‡ºé”™
**A:** æ£€æŸ¥æ˜¯å¦æœ‰ TS è¯­æ³•é”™è¯¯ã€‚è¿è¡Œ `npm run build` æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯ã€‚

### Q: ä¿®æ”¹äº†ä»£ç ä½†å¾®ä¿¡å¼€å‘è€…å·¥å…·æ²¡æœ‰æ›´æ–°
**A:** ç¡®ä¿è¿è¡Œäº† `npm run build` æˆ– `npm run dev`ã€‚ç„¶ååœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»ã€Œç¼–è¯‘ã€åˆ·æ–°ã€‚

### Q: æ¸…é™¤ç¼–è¯‘æ–‡ä»¶
**A:** è¿è¡Œ `npm run clean` åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„ `.js`ã€`.js.map` å’Œ `.d.ts` æ–‡ä»¶ã€‚

### Q: å¦‚ä½•åªç¼–è¯‘ç‰¹å®šæ–‡ä»¶
**A:** ä½¿ç”¨ tsc ç¼–è¯‘å•ä¸ªæ–‡ä»¶ï¼š
```bash
npx tsc app.ts
```

## é¡¹ç›®ç»“æ„

```
congwujiuzhu/
â”œâ”€â”€ app.ts              â† æºä»£ç 
â”œâ”€â”€ app.js              â† ç¼–è¯‘ç»“æœï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ app.json            â† å°ç¨‹åºé…ç½®
â”œâ”€â”€ app.wxss            â† å…¨å±€æ ·å¼
â”œâ”€â”€ global.d.ts         â† ç±»å‹å®šä¹‰
â”œâ”€â”€ tsconfig.json       â† TypeScript é…ç½®
â”œâ”€â”€ package.json        â† npm é…ç½®
â”œâ”€â”€ types.ts            â† é¡¹ç›®ç±»å‹å®šä¹‰
â”œâ”€â”€ pages/              â† é¡µé¢
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ index.js    â† ç¼–è¯‘ç»“æœ
â”‚   â”‚   â”œâ”€â”€ index.wxml
â”‚   â”‚   â”œâ”€â”€ index.wxss
â”‚   â”‚   â””â”€â”€ index.json
â”‚   â”œâ”€â”€ list/
â”‚   â”œâ”€â”€ detail/
â”‚   â””â”€â”€ report/
â””â”€â”€ services/           â† æœåŠ¡/å·¥å…·å‡½æ•°
    â”œâ”€â”€ nativeMapService.ts
    â”œâ”€â”€ nativeMapService.js
    â”œâ”€â”€ storageService.ts
    â”œâ”€â”€ storageService.js
    â””â”€â”€ ...
```

## å·¥ä½œæµç¨‹

```
ç¼–è¾‘ .ts æ–‡ä»¶
    â†“
è¿è¡Œ npm run buildï¼ˆæˆ– npm run devï¼‰
    â†“
TypeScript ç¼–è¯‘ä¸º .js æ–‡ä»¶
    â†“
åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ç¼–è¯‘åçš„é¡¹ç›®
    â†“
æµ‹è¯•è¿è¡Œ
```

## å¿«é€Ÿå¼€å§‹å‘½ä»¤

```bash
# ç¼–è¯‘ä¸€æ¬¡
npm run build

# æŒç»­ç›‘å¬å’Œç¼–è¯‘ï¼ˆæ¨èå¼€å‘æ—¶ä½¿ç”¨ï¼‰
npm run dev

# æ¸…é™¤ç¼–è¯‘æ–‡ä»¶
npm run clean
```

---

ç°åœ¨ä½ å¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ­£å¸¸è¿è¡Œå°ç¨‹åºäº†ï¼ğŸ‰
